.[]
})
View(obs)
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
View(obs)
colnames(out) <- c("var", "stationID", "type", "dhr", "lat", "lon", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
obs[, .N, by = .(var)]
obs[, .N, by = .(var, date.time)]
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_line(aes(color = var))
files <- Sys.glob("E1/diagfiles/asim*")
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
files <- Sys.glob("E1/diagfiles/asim*")
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_line(aes(color = var))
range(obs$rerr)
obs %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
facet_wrap(~factor(date.time))
obs %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
facet_wrap(~factor(var))
obs %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_histogram(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
unique(obs[var == "q"], obs.guess)
unique(obs[var == "q", obs.guess] )
range(obs$obs2)
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_histogram() +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
density
density
o
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point() +
facet_wrap(~var)
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point() +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.1) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
files <- Sys.glob("E1/diagfiles/asim*")
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
files <- Sys.glob("E1/diagfiles/asim*")
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_line(aes(color = var))
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
files <- Sys.glob("E1/diagfiles/asim*")
obs <- lapply(files, function(f) {
date_time <- ymd_hms(substr(basename(f), 11, 24))
fread(f, na.strings = c("1e+10", "10000000000.00", "-99999.90")) %>%
.[, date.time := date_time] %>%
.[]
}) %>%
rbindlist() %>%
.[, c("V2", "V4") := NULL]
colnames(obs) <- c("var", "stationID", "type", "dhr", "lat", "lon", "pressure", "usage.flag", "obs", "obs.guess", "obs2", "obs.guess2", "rerr", "date.time")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1 & var == "t"] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = type))
obs[usage.flag == 1 & var == "t"] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(group = type))
obs[usage.flag == 1 & var == "t"] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(group = type, color = type))
obs[usage.flag == 1 & var == "t"] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(group = type, color = factor(type)))
library(patchwork)
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
+
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
+
# obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
+
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
+
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free")
+
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free") +
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
scale_color_discrete(legend = NULL) +
geom_rug() +
facet_wrap(~factor(var), scales = "free") +
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
scale_color_discrete() +
geom_rug() +
facet_wrap(~factor(var), scales = "free") +
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free") +
theme(legend.position = "none") +
obs[usage.flag == 1] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_col(aes(color = var))
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_bar(aes(color = var), position = "dodge")
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_col(aes(color = var), position = "dodge")
obs[, .N, by = .(var, date.time)] %>%
ggplot(aes(date.time, N)) +
geom_col(aes(fill = var), position = "dodge")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(date.time, N)) +
geom_col(aes(fill = type), position = "dodge")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = type), position = "dodge")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge")
obs[, .N, by = .(var, type)]
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)))
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_tile()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_y_log10()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_color_brewer() +
scale_y_log10()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_color_viridis_d() +
scale_y_log10()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_viridis_d() +
scale_y_log10()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_brewer(type = "qual") +
scale_y_log10()
scale_fill_brewer(type = "qual", palette = 2 +
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_brewer(type = "qual", palette = 2) +
scale_y_log10()
viridis_d
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_viridis_d() +
scale_y_log10()
obs[, .N, by = .(var, type)] %>%
ggplot(aes(var, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_viridis_d() +
scale_y_log10() +
facet_wrap(~var)
obs[, .N, by = .(var, type)] %>%
ggplot(aes(type, N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_viridis_d() +
scale_y_log10() +
facet_wrap(~var, scales = "free")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(factor(type), N)) +
geom_col(aes(fill = factor(type)), position = "dodge") +
scale_fill_viridis_d() +
scale_y_log10() +
facet_wrap(~var, scales = "free")
obs[, .N, by = .(var, type)] %>%
ggplot(aes(factor(type), N)) +
geom_col(position = "dodge") +
# scale_fill_viridis_d() +
scale_y_log10() +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10] %>%
ggplot(aes(lon, lat)) +
geom_point(aes(color = obs.guess)) +
facet_wrap(~factor(date.time))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10] %>%
ggplot(aes(lon, lat)) +
geom_point(aes(color = obs)) +
facet_wrap(~factor(date.time))
unique(obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, stationID])
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .c(stationID)]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID)]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(lon, lat)) +
geom_point(aes(size = N))
map <- rnaturalearth::ne_states(country = "argentina", returnclass = "sf")
map <- rnaturalearth::ne_states(country = "argentina", returnclass = "sf")
View(map)
map <- rnaturalearth::ne_states(country = "argentina", returnclass = "sf")
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(lon, lat)) +
geom_point(aes(size = N)) +
geom_sf(data = map)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(lon, lat)) +
geom_point(aes(size = N)) +
geom_sf(data = map, inherit.aes = FALSE)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_point(aes(size = N)) +
geom_sf(data = map, inherit.aes = FALSE)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)]
stations <- obs %>%
group_by(stationID) %>%
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
geom_text(aes(label))
stations <- obs %>%
group_by(stationID) %>%
filter(row_number(stationID) == 1)
View(stations)
stations <- obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10] %>%
group_by(stationID) %>%
filter(row_number(stationID) == 1)
View(stations)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
geom_text(data = stations, aes(label = stationID))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
geom_text(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5)
install.packages("ggrepel")
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5)
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
labs(y = c(-43, -20))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
coord_cartesian(ylim = c(-43, -20))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
coord_sf(ylim = c(-43, -20))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N)) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
labs(x = "lon") +
coord_sf(ylim = c(-43, -20))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N), alpha = 0.5) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
labs(x = "lon") +
coord_sf(ylim = c(-43, -20))
obs[stationID == "INT511"]
obs[stationID == "INT511" & obs.guess > 10]
obs[usage.flag == 1 & abs(dhr) <= 0.5] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(color = var)) +
geom_rug() +
facet_wrap(~factor(var), scales = "free") +
theme(legend.position = "none") +
obs[usage.flag == 1 & abs(dhr) <= 0.5] %>%
ggplot(aes(obs.guess, rerr)) +
geom_point(alpha = 0.05, size = 0.5) +
facet_wrap(~var, scales = "free")
obs[usage.flag == 1 & abs(dhr) <= 0.5]
obs[usage.flag == 1 & var == "t" & abs(dhr) <= 0.5] %>%
ggplot(aes(obs.guess)) +
geom_density(aes(group = type, color = factor(type)))
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10 & abs(dhr) <= 0.5, .N, by = .(stationID, lon, lat)]
obs[usage.flag == 1 & var == "t" & type == 181 & obs.guess > 10 & abs(dhr) <= 0.5, .N, by = .(stationID, lon, lat)] %>%
ggplot(aes(ConvertLongitude(lon), lat)) +
geom_sf(data = map, inherit.aes = FALSE) +
geom_point(aes(size = N), alpha = 0.5) +
ggrepel::geom_label_repel(data = stations, aes(label = stationID), nudge_y = 2, alpha = 0.5) +
labs(x = "lon") +
coord_sf(ylim = c(-43, -20))
obs[stationID == "INT511" & obs.guess > 10 & abs(dhr) <= 0.5] %>%
ggplot(aes(dhr, obs.guess)) +
geom_line(aes(color =  factor(date.time)))
range(obs$dhr)
prepbufr <- fread("prepbufr_2018112018.csv")
View(prepbufr)
range(prepbufr$V6)
5753*10*4
obs[stationID == "INT511" & obs.guess > 10 & abs(dhr) <= 0.5] %>%
ggplot(aes(date.time, obs.guess)) +
geom_line()
obs[stationID == "INT511" & obs.guess > 10 & abs(dhr) <= 0.5] %>%
ggplot(aes(date.time, obs.guess)) +
geom_point()
